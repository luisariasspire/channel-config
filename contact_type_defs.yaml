# This file defines the contact types from a licensing perspective.
# For each type, it defines the licenses necessary to use it.
# Refer to the Regulatory Tracker for detailed licensing information:
# https://spire.sharepoint.us/:x:/r/sites/Regulatory/Shared%20Documents/TechnicalLibrary/Regulatory_Tracker.xlsx?d=w6bf2b27a32174b00b28214137c3c5971&csf=1&web=1&e=O2u2rS

bands:
  # The band definitions are given as lower and upper frequency limits,
  # drawn from the Regulatory Tracker sheet. All values in MHz.
  UHF402_7_UD: &UHF402_7_UD
    band: [402.6, 402.8]
    earth_to_space: true
    space_to_earth: true

  UHF450_U: &UHF450_U
    band: [449.75, 450.25]
    earth_to_space: true
    space_to_earth: false

  UHF401_5_D: &UHF401_5_D
    band: [401.0, 402.0]
    earth_to_space: false
    space_to_earth: true

  UHF400_U: &UHF400_U
    band: [399.9, 400.05]
    earth_to_space: true
    space_to_earth: false

  SBAND2022_5_D: &SBAND2022_5_D
    band: [2020.0, 2025.0]
    earth_to_space: false
    space_to_earth: true

  SBAND2200_5_D: &SBAND2200_5_D
    band: [2200.0, 2201.0]
    earth_to_space: false
    space_to_earth: true

  SBAND2032_5_U: &SBAND2032_5_U
    band: [2030.0, 2035.0]
    earth_to_space: true
    space_to_earth: false

  XBAND8200_D: &XBAND8200_D
    band: [8170.0, 8230.0]
    earth_to_space: false
    space_to_earth: true

contact_types:
  # Bidirectional contact types.
  CONTACT_BIDIR_PARAM_UHF: &contact_bidir_uhf
    desc: "Bidirectional contact with UHF only"
    directionality: "Bidirectional"
    contact_type: "CONTACT_SPACE_GROUND_BIDIR"
    all_of:
      - *UHF402_7_UD

  # Bidirectional contact, using UHF for uplink and S-band for downlink.
  CONTACT_BIDIR_PARAM: &contact_bidir_s_down
    desc: "Bidirectional contact with UHF up and S-band down"
    directionality: "Bidirectional"
    contact_type: "CONTACT_SPACE_GROUND_BIDIR"
    all_of:
      - *UHF402_7_UD
      - *SBAND2022_5_D

  # Bidirectional contact, using S-band for uplink and X-band for downlink.
  CONTACT_BIDIR_X_DOWN_PARAM: &contact_bidir_x_down
    desc: "Bidirectional contact with S-band up and X-band down"
    directionality: "Bidirectional"
    contact_type: "CONTACT_SPACE_GROUND_BIDIR"
    all_of:
      - *XBAND8200_D
      - *SBAND2032_5_U

  CONTACT_BIDIR_PARAM_DVBS2X_HIGH_ELEVATION:
    <<: *contact_bidir_s_down
    desc: "Bidirectional contact with UHF up and S-band down, using DVB-S2X high-elevation modcod"

  CONTACT_BIDIR_PARAM_DVBS2X_BW5MHZ_PLS15:
    <<: *contact_bidir_s_down
    desc: "Bidirectional contact with UHF up and S-band down, using DVB-S2X modulation and 5MHz rf bandwidth at PLS15"

  CONTACT_BIDIR_PARAM_DVBS2X_BW5MHZ_PLS11:
    <<: *contact_bidir_s_down
    desc: "Bidirectional contact with UHF up and S-band down, using DVB-S2X modulation and 5MHz rf bandwidth at PLS11"

  BIDIR_XBAND_D_SBAND_U_BW_10_PLS_5:
    <<: *contact_bidir_x_down
    desc: "Bidirectional contact with S-band up and X-band down, with 10Mhz bandwidth at PLS 5"

  BIDIR_XBAND_D_SBAND_U_BW_10_PLS_13:
    <<: *contact_bidir_x_down
    desc: "Bidirectional contact with S-band up and X-band down, with 10Mhz bandwidth at PLS 13"

  # Receive-only contact types.
  # CONTACT_RXO is the default, and uses the 2022MHz S-band license.
  CONTACT_RXO: &contact_rxo
    desc: "One-way contact with S-band down"
    contact_type: "CONTACT_SPACE_GROUND_TXO"
    directionality: "SpaceToEarth"
    all_of:
      - *SBAND2022_5_D

  CONTACT_RXO_DVBS2X: 
    <<: *contact_rxo
    desc: "One-way contact with S-band down, using DVB-S2X modulation"

  CONTACT_RXO_DVBS2X_HIGH_ELEVATION:
    <<: *contact_rxo
    desc: "One-way contact with S-band down, using DVB-S2X high-elevation modcod"

  CONTACT_RXO_DVBS2X_BW5MHZ_PLS15:
    <<: *contact_rxo
    desc: "One-way contact with S-band down, using DVB-S2X modulation and 5MHz rf bandwidth at PLS15"

  CONTACT_RXO_DVBS2X_BW5MHZ_PLS11:
    <<: *contact_rxo
    desc: "One-way contact with S-band down, using DVB-S2X modulation and 5MHz rf bandwidth at PLS11"

  # Contact type for receive-only broadcasts at 2200 MHz.
  CONTACT_RXO_SBAND_FREQ_2200_MHZ: &contact_rxo_sband_freq_2200_mhz
    all_of:
      - *SBAND2200_5_D
    desc: "One-way contact with S-band down in 2200MHz band"
    contact_type: "CONTACT_SPACE_GROUND_TXO"
    directionality: "SpaceToEarth"

  CONTACT_RXO_DVBS2X_SBAND_FREQ_2200_MHZ: 
    <<: *contact_rxo_sband_freq_2200_mhz
    desc: "One-way contact with S-band down in 2200MHz band using DVB-S2X modulation"


  TXO_XBAND: &xband_txo
    all_of:
      - *XBAND8200_D
    desc: "One-way contact in X-band at 10Mhz bandwidth"
    contact_type: "CONTACT_SPACE_GROUND_TXO"
    directionality: "SpaceToEarth"

  TXO_XBAND_ADCS_TRACK_BW_20_PLS_61:
    <<: *xband_txo
    desc: "One-way contact in X-band at 20Mhz bandwidth at PLS61, with target tracking"

  CONTACT_KSATLITE_SBAND_SPACE_GROUND_TXO: &CONTACT_KSATLITE_SBAND_SPACE_GROUND_TXO
    all_of:
      - *SBAND2200_5_D
    desc: "One-way contact in S-band, using KSAT Lite network"
    contact_type: "CONTACT_SPACE_GROUND_TXO"
    directionality: "SpaceToEarth"

  TXO_XBAND_PROV_KSAT: &xband_txo_ksat
    all_of:
      - *XBAND8200_D
    desc: "One-way contact in X-band at 10Mhz bandwidth, using KSAT Lite network"
    contact_type: "CONTACT_SPACE_GROUND_TXO"
    directionality: "SpaceToEarth"

  TXO_XBAND_PROV_KSAT_ADCS_TRACK_BW_20_PLS_49:
    <<: *xband_txo_ksat
    desc: "One-way contact in X-band at 20Mhz bandwidth at PLS49 with target tracking, using KSAT Lite network"


# Below are alias definitions for groups of channels which can be used in
# `channel_tool`.
groups:
  # any using UHF
  uhf:
    "space_ground_uhf or ground_space_uhf"
  
  # only using UHF
  uhf_only:
    "(space_ground_uhf or ground_space_uhf) and not (ground_space_sband or space_ground_xband or space_ground_sband)" 

  # any using SBand 2020
  sband_2020:
    "space_ground_sband_mid_freq_mhz == 2022.5"

  # only using UHF and SBand 2020:
  uhf_and_sband_2020_only:
    "space_ground_sband_mid_freq_mhz == 2022.5 and (space_ground_uhf or ground_space_uhf)"

  # only using SBand 2200
  sband_2200_only:
    "space_ground_sband_mid_freq_mhz == 2200.5 and directionality == 'TXO'"

  # only using SBand 2020
  sband_2020_only:
    "space_ground_sband_mid_freq_mhz == 2022.5 and directionality == 'TXO'"

  # any using SBand 2200
  sband_2200:
    "space_ground_sband_mid_freq_mhz == 2200.5"

  # any using SBand
  sband:
    "ground_space_sband or space_ground_sband"

  # any RXO using SBand legacy
  sband_legacy_rxo:
    "directionality == 'TXO' and space_ground_sband_encoding == 'LEGACY'"

  # any using XBand
  xband:
    "space_ground_xband"

  # bidirectionals
  bidir:
    "directionality == 'BIDIR'"

  # SBand bidirectionals
  sband_bidir:
    "directionality == 'BIDIR' and (space_ground_sband or ground_space_sband)"

  # space-to-ground only
  rxo:
    "directionality == 'TXO'"

  # DVBS2X encoded
  dvbs2x:
    "space_ground_sband_encoding == 'DVBS2X' or space_ground_xband"

  # Target tracking
  tracking:
    "adcs_pointing == 'TRACKING'"

  # Antenna-only KSAT contacts.
  ksatlite:
    "provider == 'KSAT'"

  # sband 5MHz DVB contacts
  sband_5mhz:
    "space_ground_sband_bandwidth_mhz == 5 and space_ground_sband_encoding == 'DVBS2X'"
